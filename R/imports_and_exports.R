# UbiOps
#
# Client Library to interact with the UbiOps API.
#
# UbiOps API version: v2.1
# Generated by custom generator based on: https://openapi-generator.tech

# ImportsAndExports operations


#' @title Create an export
#' @description Create an export by selecting the objects in the export
#' @param data  named list of: [ deployments (optional), pipelines (optional), environment_variables (optional), environments (optional) ]
#' @param preload_content (optional) Whether the API response should be preloaded. When TRUE the JSON response string is parsed to an R object. When FALSE, unprocessed API response object is returned. - Default = TRUE
#' @param ...
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#'  Details of the created export
#'   - `id`: Unique identifier for the export (UUID)
#'   - `status`: Status of the export
#'   - `error_message`: The error message in case of a failure
#'   - `creation_date`: The date when the export was created
#'   - `size`: Size of the export in bytes
#' @examples
#' \dontrun{
#' data <- list(
#'  deployments = list(key = list(key = "value")),  # (optional)
#'  pipelines = list(key = list(key = "value")),  # (optional)
#'  environment_variables = list(key = list(key = "value")),  # (optional)
#'  environments = list(key = list(key = "value"))  # (optional)
#' )
#'
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' result <- ubiops::exports_create(
#'    data
#' )
#' 
#' # Or provide directly
#' result <- ubiops::exports_create(
#'    data,
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' print(result)
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
exports_create <- function(data,  preload_content=TRUE, ...){
  query_params <- list()

  if (missing(`data`)) {
    stop("Missing required parameter `data`.")
  }
  
  body <- rjson::toJSON(data)
  
  url_path <- "/projects/{project_name}/exports"

  api.response <- call_api(url_path, "POST", body, query_params, ...)
  if (preload_content) {
    deserializedRespObj <- tryCatch(
      deserialize(api.response),
      error = function(e){
        stop("Failed to deserialize response")
      }
    )

  } else {
    ApiResponse$new(api.response)
  }
}


#' @title Delete an export
#' @description Delete an export from a project
#' @param export.id  character
#' @param ...
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#' @examples
#' \dontrun{
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' ubiops::exports_delete(
#'    export.id
#' )
#' 
#' # Or provide directly
#' ubiops::exports_delete(
#'    export.id,
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
exports_delete <- function(export.id,  ...){
  query_params <- list()

  if (missing(`export.id`)) {
    stop("Missing required parameter `export.id`.")
  }
  
  url_path <- "/projects/{project_name}/exports/{export_id}"
  if (!missing(`export.id`)) {
    url_path <- gsub("\\{export_id\\}", utils::URLencode(as.character(`export.id`), reserved = TRUE), url_path)
  }

  api.response <- call_api(url_path, "DELETE", NULL, query_params, ...)
  return(invisible(NULL))
}


#' @title Download an export
#' @description Download an export in a project
#' @param export.id  character
#' @param preload_content (optional) Whether the API response should be preloaded. When TRUE the output file is loaded and written to the storage location defined by UBIOPS_TEMP_FOLDER_PATH. When FALSE, unprocessed API response object is returned. - Default = FALSE
#' @param ...
#'  UBIOPS_TEMP_FOLDER_PATH (system environment variable) Storage location for output file when `preload_content` is set to TRUE - Default = current working directory
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#' @examples
#' \dontrun{
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' result <- ubiops::exports_download(
#'    export.id
#' )
#' 
#' # Or provide directly
#' result <- ubiops::exports_download(
#'    export.id,
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' # Save file manually
#' file_name <- result$getFileName()
#' 
#' output <- file(file.path(getwd(), file_name), "wb")
#' readr::write_file(result$getContent(), output)
#' close(output)
#' 
#' # Or save file directly in temp folder
#' # by using environment variables or providing directly
#' Sys.setenv("UBIOPS_TEMP_FOLDER_PATH" = getwd())
#' output_path <- ubiops::exports_download(
#'   export.id,
#'   preload_content=TRUE
#' )
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
exports_download <- function(export.id,  preload_content=FALSE, ...){
  query_params <- list()

  if (missing(`export.id`)) {
    stop("Missing required parameter `export.id`.")
  }
  
  url_path <- "/projects/{project_name}/exports/{export_id}/download"
  if (!missing(`export.id`)) {
    url_path <- gsub("\\{export_id\\}", utils::URLencode(as.character(`export.id`), reserved = TRUE), url_path)
  }

  api.response <- call_api(url_path, "GET", NULL, query_params, ...)
  if (preload_content) {
    deserialize_file(api.response, ...)

  } else {
    ApiFileResponse$new(api.response)
  }
}


#' @title Get an export
#' @description Get the details of an export in a project
#' @param export.id  character
#' @param preload_content (optional) Whether the API response should be preloaded. When TRUE the JSON response string is parsed to an R object. When FALSE, unprocessed API response object is returned. - Default = TRUE
#' @param ...
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#'  - `id`: Unique identifier for the export (UUID)
#'   - `status`: Status of the export
#'   - `error_message`: The error message in case of a failure
#'   - `creation_date`: The date when the export was created
#'   - `size`: Size of the export in bytes
#'   - `deployments`: Dictionary of the deployments in the export
#'   - `pipelines`: Dictionary of the pipelines in the export
#'   - `environment_variables`: Dictionary of the environment variables in the export
#'   - `environments`: Dictionary of the environments in the export
#' @examples
#' \dontrun{
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' result <- ubiops::exports_get(
#'    export.id
#' )
#' 
#' # Or provide directly
#' result <- ubiops::exports_get(
#'    export.id,
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' print(result)
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
exports_get <- function(export.id,  preload_content=TRUE, ...){
  query_params <- list()

  if (missing(`export.id`)) {
    stop("Missing required parameter `export.id`.")
  }
  
  url_path <- "/projects/{project_name}/exports/{export_id}"
  if (!missing(`export.id`)) {
    url_path <- gsub("\\{export_id\\}", utils::URLencode(as.character(`export.id`), reserved = TRUE), url_path)
  }

  api.response <- call_api(url_path, "GET", NULL, query_params, ...)
  if (preload_content) {
    deserializedRespObj <- tryCatch(
      deserialize(api.response),
      error = function(e){
        stop("Failed to deserialize response")
      }
    )

  } else {
    ApiResponse$new(api.response)
  }
}


#' @title List exports
#' @description List all exports in a project
#' @param status (optional) character
#' @param preload_content (optional) Whether the API response should be preloaded. When TRUE the JSON response string is parsed to an R object. When FALSE, unprocessed API response object is returned. - Default = TRUE
#' @param ...
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#'  A list of details of the exports in the project
#'    - `id`: Unique identifier for the export (UUID)
#'    - `creation_date`: Time the export was created
#'    - `status`: The status of the export
#'    - `error_message`: The error message in case of a failure
#'    - `size`: Size of the export in bytes
#' @examples
#' \dontrun{
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' result <- ubiops::exports_list(
#'    
#'    status = NULL
#' )
#' 
#' # Or provide directly
#' result <- ubiops::exports_list(
#'    
#'    status = NULL, 
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' print(result)
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
exports_list <- function(status=NULL,  preload_content=TRUE, ...){
  query_params <- list()

  query_params['status'] <- status
  
  url_path <- "/projects/{project_name}/exports"

  api.response <- call_api(url_path, "GET", NULL, query_params, ...)
  if (preload_content) {
    deserializedRespObj <- tryCatch(
      deserialize(api.response),
      error = function(e){
        stop("Failed to deserialize response")
      }
    )

  } else {
    ApiResponse$new(api.response)
  }
}


#' @title Create an import
#' @description Create an import by uploading a zip file, providing a link to an import file or by giving an export id. Only one of the fields `file`, `import_link` or `export_id` may be given at a time.  When providing a link to an import file, make sure it is publicly downloadable.
#' @param file (optional) file path - Example: file.path("path", "to", "file")
#' @param import.link (optional) character
#' @param export.id (optional) character
#' @param skip.confirmation (optional) character ("true"|"false")
#' @param preload_content (optional) Whether the API response should be preloaded. When TRUE the JSON response string is parsed to an R object. When FALSE, unprocessed API response object is returned. - Default = TRUE
#' @param ...
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#'  Details of the created import
#'   - `id`: Unique identifier for the import (UUID)
#'   - `status`: Status of the import
#'   - `error_message`: The error message in case of a failure
#'   - `creation_date`: The date when the import was created
#'   - `size`: Size of the import in bytes
#' @examples
#' \dontrun{
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' result <- ubiops::imports_create(
#'    
#'    file = NULL, import.link = NULL, export.id = NULL, skip.confirmation = NULL
#' )
#' 
#' # Or provide directly
#' result <- ubiops::imports_create(
#'    
#'    file = NULL, import.link = NULL, export.id = NULL, skip.confirmation = NULL, 
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' print(result)
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
imports_create <- function(file=NULL, import.link=NULL, export.id=NULL, skip.confirmation=NULL,  preload_content=TRUE, ...){
  query_params <- list()

  body <- list(
    "file" = if (!is.null(`file`)) httr::upload_file(file) else NULL,
    "import_link" = import.link,
    "export_id" = export.id,
    "skip_confirmation" = skip.confirmation
  )
  
  url_path <- "/projects/{project_name}/imports"

  api.response <- call_api(url_path, "POST", body, query_params, content_type = httr::content_type("multipart/form-data"), ...)
  if (preload_content) {
    deserializedRespObj <- tryCatch(
      deserialize(api.response),
      error = function(e){
        stop("Failed to deserialize response")
      }
    )

  } else {
    ApiResponse$new(api.response)
  }
}


#' @title Delete an import
#' @description Delete an import from a project
#' @param import.id  character
#' @param ...
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#' @examples
#' \dontrun{
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' ubiops::imports_delete(
#'    import.id
#' )
#' 
#' # Or provide directly
#' ubiops::imports_delete(
#'    import.id,
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
imports_delete <- function(import.id,  ...){
  query_params <- list()

  if (missing(`import.id`)) {
    stop("Missing required parameter `import.id`.")
  }
  
  url_path <- "/projects/{project_name}/imports/{import_id}"
  if (!missing(`import.id`)) {
    url_path <- gsub("\\{import_id\\}", utils::URLencode(as.character(`import.id`), reserved = TRUE), url_path)
  }

  api.response <- call_api(url_path, "DELETE", NULL, query_params, ...)
  return(invisible(NULL))
}


#' @title Download an import
#' @description Download an import in a project
#' @param import.id  character
#' @param preload_content (optional) Whether the API response should be preloaded. When TRUE the output file is loaded and written to the storage location defined by UBIOPS_TEMP_FOLDER_PATH. When FALSE, unprocessed API response object is returned. - Default = FALSE
#' @param ...
#'  UBIOPS_TEMP_FOLDER_PATH (system environment variable) Storage location for output file when `preload_content` is set to TRUE - Default = current working directory
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#' @examples
#' \dontrun{
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' result <- ubiops::imports_download(
#'    import.id
#' )
#' 
#' # Or provide directly
#' result <- ubiops::imports_download(
#'    import.id,
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' # Save file manually
#' file_name <- result$getFileName()
#' 
#' output <- file(file.path(getwd(), file_name), "wb")
#' readr::write_file(result$getContent(), output)
#' close(output)
#' 
#' # Or save file directly in temp folder
#' # by using environment variables or providing directly
#' Sys.setenv("UBIOPS_TEMP_FOLDER_PATH" = getwd())
#' output_path <- ubiops::imports_download(
#'   import.id,
#'   preload_content=TRUE
#' )
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
imports_download <- function(import.id,  preload_content=FALSE, ...){
  query_params <- list()

  if (missing(`import.id`)) {
    stop("Missing required parameter `import.id`.")
  }
  
  url_path <- "/projects/{project_name}/imports/{import_id}/download"
  if (!missing(`import.id`)) {
    url_path <- gsub("\\{import_id\\}", utils::URLencode(as.character(`import.id`), reserved = TRUE), url_path)
  }

  api.response <- call_api(url_path, "GET", NULL, query_params, ...)
  if (preload_content) {
    deserialize_file(api.response, ...)

  } else {
    ApiFileResponse$new(api.response)
  }
}


#' @title Get an import
#' @description Get the details of an import in a project
#' @param import.id  character
#' @param preload_content (optional) Whether the API response should be preloaded. When TRUE the JSON response string is parsed to an R object. When FALSE, unprocessed API response object is returned. - Default = TRUE
#' @param ...
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#'  - `id`: Unique identifier for the import (UUID)
#'   - `status`: Status of the import
#'   - `error_message`: The error message in case of a failure
#'   - `creation_date`: The date when the import was created
#'   - `size`: Size of the import in bytes
#'   - `deployments`: Dictionary of the deployments in the import
#'   - `pipelines`: Dictionary of the pipelines in the import
#'   - `environment_variables`: Dictionary of the environment variables in the import
#'   - `environments`: Dictionary of the environments in the import
#' @examples
#' \dontrun{
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' result <- ubiops::imports_get(
#'    import.id
#' )
#' 
#' # Or provide directly
#' result <- ubiops::imports_get(
#'    import.id,
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' print(result)
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
imports_get <- function(import.id,  preload_content=TRUE, ...){
  query_params <- list()

  if (missing(`import.id`)) {
    stop("Missing required parameter `import.id`.")
  }
  
  url_path <- "/projects/{project_name}/imports/{import_id}"
  if (!missing(`import.id`)) {
    url_path <- gsub("\\{import_id\\}", utils::URLencode(as.character(`import.id`), reserved = TRUE), url_path)
  }

  api.response <- call_api(url_path, "GET", NULL, query_params, ...)
  if (preload_content) {
    deserializedRespObj <- tryCatch(
      deserialize(api.response),
      error = function(e){
        stop("Failed to deserialize response")
      }
    )

  } else {
    ApiResponse$new(api.response)
  }
}


#' @title List imports
#' @description List all imports in a project
#' @param status (optional) character
#' @param preload_content (optional) Whether the API response should be preloaded. When TRUE the JSON response string is parsed to an R object. When FALSE, unprocessed API response object is returned. - Default = TRUE
#' @param ...
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#'  A list of details of the imports in the project
#'    - `id`: Unique identifier for the import (UUID)
#'    - `creation_date`: Time the import was created
#'    - `status`: The status of the import
#'    - `error_message`: The error message in case of a failure
#'    - `size`: Size of the import in bytes
#' @examples
#' \dontrun{
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' result <- ubiops::imports_list(
#'    
#'    status = NULL
#' )
#' 
#' # Or provide directly
#' result <- ubiops::imports_list(
#'    
#'    status = NULL, 
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' print(result)
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
imports_list <- function(status=NULL,  preload_content=TRUE, ...){
  query_params <- list()

  query_params['status'] <- status
  
  url_path <- "/projects/{project_name}/imports"

  api.response <- call_api(url_path, "GET", NULL, query_params, ...)
  if (preload_content) {
    deserializedRespObj <- tryCatch(
      deserialize(api.response),
      error = function(e){
        stop("Failed to deserialize response")
      }
    )

  } else {
    ApiResponse$new(api.response)
  }
}


#' @title Confirm an import
#' @description Confirm (and update) an import by selecting the objects in the import
#' @param import.id  character
#' @param data  named list of: [ deployments (optional), pipelines (optional), environment_variables (optional), environments (optional) ]
#' @param preload_content (optional) Whether the API response should be preloaded. When TRUE the JSON response string is parsed to an R object. When FALSE, unprocessed API response object is returned. - Default = TRUE
#' @param ...
#'  UBIOPS_PROJECT (system environment variable) UbiOps project name
#'  UBIOPS_API_TOKEN (system environment variable) Token to connect to UbiOps API
#'  UBIOPS_API_URL (optional - system environment variable) UbiOps API url - Default = "https://api.ubiops.com/v2.1"
#'  UBIOPS_TIMEOUT (optional - system environment variable) Maximum request timeout to connect to UbiOps API - Default = NA
#'  UBIOPS_DEFAULT_HEADERS (optional - system environment variable) Default headers to pass to UbiOps API, formatted like "header1:value1,header2:value2" - Default = ""
#' @return Response from the API
#'  Details of the updated import
#'   - `id`: Unique identifier for the import (UUID)
#'   - `status`: Status of the import
#'   - `error_message`: The error message in case of a failure
#'   - `creation_date`: The date when the import was created
#'   - `size`: Size of the import in bytes
#' @examples
#' \dontrun{
#' data <- list(
#'  deployments = list(key = list(key = "value")),  # (optional)
#'  pipelines = list(key = list(key = "value")),  # (optional)
#'  environment_variables = list(key = list(key = "value")),  # (optional)
#'  environments = list(key = list(key = "value"))  # (optional)
#' )
#'
#' # Use environment variables
#' Sys.setenv("UBIOPS_PROJECT" = "YOUR PROJECT NAME")
#' Sys.setenv("UBIOPS_API_TOKEN" = "YOUR API TOKEN")
#' result <- ubiops::imports_update(
#'    import.id, data
#' )
#' 
#' # Or provide directly
#' result <- ubiops::imports_update(
#'    import.id, data,
#'    UBIOPS_PROJECT = "YOUR PROJECT NAME", UBIOPS_API_TOKEN = "YOUR API TOKEN"
#' )
#' 
#' print(result)
#' 
#' # The default API url is https://api.ubiops.com/v2.1
#' # Want to use a different API url?
#' # Provide `UBIOPS_API_URL`, either directly or as environment variable.
#' }
#' @export
imports_update <- function(import.id, data,  preload_content=TRUE, ...){
  query_params <- list()

  if (missing(`import.id`)) {
    stop("Missing required parameter `import.id`.")
  }
  if (missing(`data`)) {
    stop("Missing required parameter `data`.")
  }
  
  body <- rjson::toJSON(data)
  
  url_path <- "/projects/{project_name}/imports/{import_id}"
  if (!missing(`import.id`)) {
    url_path <- gsub("\\{import_id\\}", utils::URLencode(as.character(`import.id`), reserved = TRUE), url_path)
  }

  api.response <- call_api(url_path, "PATCH", body, query_params, ...)
  if (preload_content) {
    deserializedRespObj <- tryCatch(
      deserialize(api.response),
      error = function(e){
        stop("Failed to deserialize response")
      }
    )

  } else {
    ApiResponse$new(api.response)
  }
}
